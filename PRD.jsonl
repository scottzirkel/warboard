{"id":"limits-001","category":"wargear-limits","phase":"phase-1","description":"Add maxModels field to loadout choice data structure","passes":true,"acceptance":["custodes.json has maxModels field on vexilla choice","maxModels: 1 limits vexilla to one model","Data structure documented in CLAUDE.md"],"dependencies":[]}
{"id":"limits-002","category":"wargear-limits","phase":"phase-1","description":"Add validation logic for maxModels in weapon count updates","passes":true,"acceptance":["updateWeaponCount enforces maxModels constraint","Cannot increment past maxModels limit","Validation works for all constrained options"],"dependencies":["limits-001"]}
{"id":"limits-003","category":"wargear-limits","phase":"phase-2","description":"Update UI to show maxModels limits and disable controls","passes":true,"acceptance":["Max limit indicator shown next to constrained options","Increment button disabled when limit reached","Tooltip explains the restriction"],"dependencies":["limits-002"]}
{"id":"limits-004","category":"wargear-limits","phase":"phase-2","description":"Add list validation for maxModels on save and play mode entry","passes":true,"acceptance":["Validation runs on list save","Validation runs before entering Play Mode","Clear error message shown if limits violated"],"dependencies":["limits-002"]}
{"id":"patterns-001","category":"wargear-patterns","phase":"phase-1","description":"Add pattern field to loadout options data structure","passes":true,"acceptance":["custodes.json loadout options have pattern field","pattern values: replacement or addition","Custodian Guard main-weapon is replacement, vexilla is addition"],"dependencies":[]}
{"id":"patterns-002","category":"wargear-patterns","phase":"phase-1","description":"Add paired field to choices for combined loadouts","passes":true,"acceptance":["Sentinel Blade + Shield choice has paired: true","Data structure supports grouping two items as one choice","Paired choices documented in CLAUDE.md"],"dependencies":["patterns-001"]}
{"id":"patterns-003","category":"wargear-patterns","phase":"phase-2","description":"Update weapon display logic for replacement vs addition patterns","passes":true,"acceptance":["Replacement pattern hides unselected weapons","Addition pattern shows equipped items alongside base weapons","getEquippedWeapons function handles both patterns"],"dependencies":["patterns-001"]}
{"id":"patterns-004","category":"wargear-patterns","phase":"phase-2","description":"Update UI labels to indicate pattern type","passes":true,"acceptance":["Replacement options show as dropdown with Replace with label","Addition options show as checkbox-style add controls","UI clearly distinguishes pattern types"],"dependencies":["patterns-003"]}
{"id":"patterns-005","category":"wargear-patterns","phase":"phase-2","description":"Handle paired loadouts equipping both items together","passes":true,"acceptance":["Selecting paired choice equips both items","Unselecting removes both items","Combined name shown in UI"],"dependencies":["patterns-002","patterns-003"]}
{"id":"abilities-001","category":"wargear-abilities","phase":"phase-1","description":"Add modifiers array to weapons that grant stat bonuses","passes":true,"acceptance":["Sentinel Blade weapon has modifiers array","Praesidium Shield +1W modifier added with source field","Modifier uses existing format: stat, operation, value, scope"],"dependencies":["patterns-002"]}
{"id":"abilities-002","category":"wargear-abilities","phase":"phase-2","description":"Add isWeaponEquipped helper function","passes":true,"acceptance":["Function checks if weapon is equipped based on loadoutGroup","Returns true for weapons without loadoutGroup","Works with weaponCounts state"],"dependencies":["patterns-003"]}
{"id":"abilities-003","category":"wargear-abilities","phase":"phase-2","description":"Update collectModifiers to include weapon modifiers","passes":true,"acceptance":["collectModifiers checks equipped weapons for modifiers","Weapon modifiers with model or unit scope are collected","Modifiers only apply when weapon is equipped"],"dependencies":["abilities-001","abilities-002"]}
{"id":"abilities-004","category":"wargear-abilities","phase":"phase-3","description":"Update stat display to show weapon modifier sources in tooltips","passes":true,"acceptance":["Tooltip shows Praesidium Shield as source of +1W","Multiple modifier sources listed if applicable","Clear formatting of modifier sources"],"dependencies":["abilities-003"]}
{"id":"abilities-005","category":"wargear-abilities","phase":"phase-3","description":"Add wargear abilities section to Quick Reference panel","passes":true,"acceptance":["Quick Reference shows wargear stat modifiers","Praesidium Shield: Bearer gains +1 Wound displayed","Section only shows if wargear abilities exist"],"dependencies":["abilities-003"]}
{"id":"leader-001","category":"leader-attachment","phase":"phase-1","description":"Add eligibleUnits array to leader abilities in data","passes":true,"acceptance":["Shield-Captain leader ability has eligibleUnits array","eligibleUnits contains custodian-guard and custodian-wardens","Blade Champion leader ability updated similarly"],"dependencies":[]}
{"id":"leader-002","category":"leader-attachment","phase":"phase-1","description":"Add attachedLeader field to list unit structure","passes":true,"acceptance":["addUnitToList includes attachedLeader: null","attachedLeader structure is { unitIndex: number } or null","Saved lists include attachedLeader field"],"dependencies":[]}
{"id":"leader-003","category":"leader-attachment","phase":"phase-2","description":"Add getAvailableLeaders function","passes":true,"acceptance":["Returns list of eligible unattached leaders for a unit","Filters based on leader eligibleUnits array","Excludes leaders already attached to other units"],"dependencies":["leader-001","leader-002"]}
{"id":"leader-004","category":"leader-attachment","phase":"phase-2","description":"Add attachLeader and detachLeader functions","passes":true,"acceptance":["attachLeader detaches leader from previous unit first","attachLeader sets attachedLeader on target unit","detachLeader sets attachedLeader to null"],"dependencies":["leader-003"]}
{"id":"leader-005","category":"leader-attachment","phase":"phase-2","description":"Update collectModifiers to include attached leader modifiers","passes":true,"acceptance":["Leader enhancement modifiers apply to attached unit","Modifiers removed when leader detached","Works with existing modifier system"],"dependencies":["leader-004"]}
{"id":"leader-006","category":"leader-attachment","phase":"phase-3","description":"Add leader attachment dropdown UI to unit cards","passes":true,"acceptance":["Dropdown shows available leaders for eligible units","Selecting leader calls attachLeader function","None option detaches current leader"],"dependencies":["leader-004"]}
{"id":"leader-007","category":"leader-attachment","phase":"phase-3","description":"Update unit display for units with attached leaders","passes":true,"acceptance":["Unit name shows combined format: Custodian Guard + Shield-Captain","Leader weapons shown in weapon list","Combined model count displayed"],"dependencies":["leader-006"]}
{"id":"leader-008","category":"leader-attachment","phase":"phase-3","description":"Hide attached leaders from main army list display","passes":true,"acceptance":["Attached leaders not shown as separate units in Play Mode","Build Mode still shows all units for editing","Visual indicator that leader is attached elsewhere"],"dependencies":["leader-007"]}
{"id":"leader-009","category":"leader-attachment","phase":"phase-3","description":"Add separate wound tracking for attached leaders","passes":true,"acceptance":["Leader wounds tracked separately from unit wounds","UI shows both unit and leader wound pools","Damage can be assigned to either"],"dependencies":["leader-007"]}
{"id":"leader-010","category":"leader-attachment","phase":"phase-4","description":"Add validation rules for leader attachment","passes":true,"acceptance":["Leader can only attach to one unit","Unit can only have one leader","Validation prevents invalid attachments"],"dependencies":["leader-004"]}
{"id":"mixed-001","category":"mixed-weapons","phase":"phase-3","description":"Group weapons by loadout choice in Play Mode unit display","passes":true,"acceptance":["Weapons grouped by loadout choice (e.g., Guardian Spear group, Sentinel Blade group)","Each group shows model count prefix (3×, 2×)","Groups visually distinct from each other"],"dependencies":["patterns-003"]}
{"id":"mixed-002","category":"mixed-weapons","phase":"phase-3","description":"Separate ranged and melee weapon sections within each loadout group","passes":true,"acceptance":["Each loadout group has Ranged and Melee subsections","Subsections shown even if weapons are identical across groups","Clear visual hierarchy: Loadout > Ranged/Melee > Weapon stats"],"dependencies":["mixed-001"]}
{"id":"mixed-003","category":"mixed-weapons","phase":"phase-3","description":"Make loadout groups collapsible in Play Mode","passes":true,"acceptance":["Click loadout group header to collapse/expand","Collapsed state shows just the header (e.g., ▶ 3× Guardian Spear)","Expanded state shows ranged/melee subsections"],"dependencies":["mixed-001"]}
{"id":"mixed-004","category":"mixed-weapons","phase":"phase-3","description":"Track activation state per loadout group","passes":true,"acceptance":["Collapsed groups indicate those models have activated","Visual difference between collapsed-by-user and collapsed-as-activated","State resets each battle round"],"dependencies":["mixed-003"]}
{"id":"tyranids-001","category":"tyranids-data","phase":"phase-1","description":"Create tyranids.json with faction metadata and army rules","passes":true,"acceptance":["data/tyranids.json exists with faction: Tyranids","Army rules include Synapse with 6\" range bonus description","Army rules include Shadow in the Warp once-per-battle ability","lastUpdated set to 2026-01"],"dependencies":[]}
{"id":"tyranids-002","category":"tyranids-data","phase":"phase-1","description":"Add Termagants battleline unit to tyranids.json","passes":false,"acceptance":["Termagants unit with points 60/120 for 10/20 models","Stats: M6 T3 SV5+ W1 LD8+ OC2","Fleshborer ranged weapon (18\" A1 BS4+ S5 AP0 D1)","Devourer and Spinefists weapon options","Skulking Horrors ability","Keywords include Infantry, Battleline, Great Devourer, Endless Multitude"],"dependencies":["tyranids-001"]}
{"id":"tyranids-003","category":"tyranids-data","phase":"phase-1","description":"Add Hormagaunts battleline unit to tyranids.json","passes":false,"acceptance":["Hormagaunts unit with points 65/130 for 10/20 models","Stats: M10 T3 SV5+ W1 LD8+ OC2","Hormagaunt talons melee weapon (A3 WS4+ S3 AP-1 D1)","Bounding Leap ability (charge after Advancing)","Keywords include Infantry, Battleline, Great Devourer, Endless Multitude"],"dependencies":["tyranids-001"]}
{"id":"tyranids-004","category":"tyranids-data","phase":"phase-1","description":"Add Genestealers elite unit to tyranids.json","passes":false,"acceptance":["Genestealers unit with points 75/140 for 5/10 models","Stats: M8 T4 SV5+ W2 LD7+ OC1 with 5+ invuln","Genestealer claws melee weapon (A4 WS2+ S4 AP-2 D1)","Scouts 8\" ability","Vanguard Predator ability (re-roll 1s near objectives)","Keywords include Infantry, Great Devourer, Vanguard Invader"],"dependencies":["tyranids-001"]}
{"id":"tyranids-005","category":"tyranids-data","phase":"phase-2","description":"Add Broodlord character to tyranids.json","passes":false,"acceptance":["Broodlord unit with points 80 for 1 model","Stats: M8 T5 SV4+ W6 LD7+ OC1 with 4+ invuln","Broodlord claws melee weapon (A5 WS2+ S6 AP-2 D2 with Twin-linked, Devastating Wounds)","Leader ability with eligibleUnits: genestealers","Scouts 8\" and Hypnotic Gaze abilities","Keywords include Infantry, Character, Great Devourer, Synapse"],"dependencies":["tyranids-004"]}
{"id":"tyranids-006","category":"tyranids-data","phase":"phase-2","description":"Add Tyranid Warriors unit to tyranids.json","passes":false,"acceptance":["Tyranid Warriors unit with points 65/130 for 3/6 models","Stats: M6 T5 SV4+ W3 LD7+ OC2","Multiple weapon options via loadoutOptions: Deathspitter, Devourer, Barbed Strangler, Venom Cannon","Scything talons melee weapon","Synapse keyword and Shadow in the Warp ability","Keywords include Infantry, Great Devourer, Synapse"],"dependencies":["tyranids-001"]}
{"id":"tyranids-007","category":"tyranids-data","phase":"phase-2","description":"Add Hive Tyrant monster to tyranids.json","passes":false,"acceptance":["Hive Tyrant unit with points 195 for 1 model","Stats: M8 T10 SV2+ W10 LD7+ OC3 with 4+ invuln","Heavy venom cannon and Stranglethorn cannon ranged options","Monstrous bonesword/lash whip and Scything talons melee","Leader ability with eligibleUnits: tyrant-guard","Synapse keyword","Keywords include Monster, Character, Great Devourer, Synapse"],"dependencies":["tyranids-001"]}
{"id":"tyranids-008","category":"tyranids-data","phase":"phase-2","description":"Add Carnifexes monster unit to tyranids.json","passes":false,"acceptance":["Carnifexes unit with points 90/180 for 1/2 models","Stats: M8 T9 SV2+ W8 LD8+ OC3","Multiple weapon loadout options: Crushing claws, Scything talons, Heavy venom cannon, Stranglethorn cannon","Deadly Demise 1 ability","Blistering Assault ability (move after taking wounds)","Keywords include Monster, Great Devourer"],"dependencies":["tyranids-001"]}
{"id":"tyranids-009","category":"tyranids-data","phase":"phase-3","description":"Add Invasion Fleet detachment to tyranids.json","passes":false,"acceptance":["Invasion Fleet detachment with Hyper-adaptations rule","Three adaptation choices: Swarming Instincts, Hyper-aggression, Hive Predators","6 stratagems including Rapid Regeneration, Adrenal Surge, Endless Swarm","4 enhancements: Alien Cunning (30pts), Perfectly Adapted (15pts), Synaptic Linchpin (20pts), Adaptive Biology (25pts)"],"dependencies":["tyranids-001"]}
{"id":"tyranids-010","category":"tyranids-data","phase":"phase-3","description":"Add Unending Swarm detachment to tyranids.json","passes":false,"acceptance":["Unending Swarm detachment with Insurmountable Odds rule","Surge movement mechanic for Endless Multitude units","Key stratagems including Unending Waves (return destroyed unit)","4 enhancements: Relentless Hunger, Naturalised Camouflage, Piercing Talons, Adrenalised Onslaught"],"dependencies":["tyranids-001"]}
{"id":"tyranids-011","category":"tyranids-data","phase":"phase-3","description":"Add Crusher Stampede detachment to tyranids.json","passes":false,"acceptance":["Crusher Stampede detachment with Enraged Behemoths rule","Bonuses based on Monster strength level","Key stratagems including Massive Impact (mortal wounds on charge)","4 enhancements: Ominous Presence, Enraged Reserves, Null Nodules, Monstrous Nemesis"],"dependencies":["tyranids-001"]}
{"id":"tyranids-012","category":"tyranids-data","phase":"phase-4","description":"Add Tyranid keyword glossary entries","passes":false,"acceptance":["Synapse keyword defined in unit glossary","Shadow in the Warp defined","Endless Multitude keyword defined","Great Devourer keyword defined"],"dependencies":["tyranids-001"]}
{"id":"tyranids-013","category":"tyranids-data","phase":"phase-4","description":"Enable Tyranids faction in main.js","passes":false,"acceptance":["disabled: true removed from Tyranids entry in availableArmies","App can switch to Tyranids faction without errors","Build Mode shows Tyranid units"],"dependencies":["tyranids-002","tyranids-003","tyranids-004","tyranids-005","tyranids-006","tyranids-007","tyranids-008","tyranids-009"]}
{"id":"tyranids-014","category":"tyranids-data","phase":"phase-4","description":"Add additional Tyranid units for variety","passes":false,"acceptance":["Gargoyles flying infantry unit","Lictor infiltrator unit","Zoanthropes Synapse unit","At least 12 total units in tyranids.json"],"dependencies":["tyranids-013"]}
